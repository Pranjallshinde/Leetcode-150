public class Solution {
    public String removeOuterParentheses(String S) {
        int cnt = 0;  // Tracks depth of parentheses
        StringBuilder ans = new StringBuilder(); // To store the final answer

        for (int i = 0; i < S.length(); i++) {
            if (S.charAt(i) == ')') {
                cnt--; // Decrease count first for ')'
            }

            if (cnt != 0) {
                ans.append(S.charAt(i)); // If not outermost, add to answer
            }

            if (S.charAt(i) == '(') {
                cnt++; // Increase count after checking
            }
        }

        return ans.toString(); // Return final string
    }
}
